<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Cartesian product of variable values for prediction — pred.grid • spida2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Cartesian product of variable values for prediction — pred.grid"><meta name="description" content="Prediction data frame to caompute predicted values"><meta property="og:description" content="Prediction data frame to caompute predicted values"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spida2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/spida2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/generalParametricSplines_v2.html">General Parametric Splines in carEx v.2</a></li>
    <li><a class="dropdown-item" href="../articles/generalParametricSplines.html">General Parametric Splines in carEx</a></li>
    <li><a class="dropdown-item" href="../articles/pdInd.html">pdInd</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmonette/spida2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Cartesian product of variable values for prediction</h1>
      <small class="dont-index">Source: <a href="https://github.com/gmonette/spida2/blob/HEAD/R/misc.R" class="external-link"><code>R/misc.R</code></a></small>
      <div class="d-none name"><code>pred.grid.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Prediction data frame to caompute predicted values</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">pred.grid</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>names of variables or named arguments with values. The
arguments that are names are evaluated in the environment, which will
typically
be a data frame supplied as an environment with the <code><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></code>
function. Named arguments are evaluted in the usual way.  The unique values
of each argument are supplied to <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></code> to
create a data frame whose rows are the Cartesian product of the
unique values of the input. See comments on usage in the examples.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Plotting predicted values for a model often requires computing
predicted values on a grid of predictor values other than the
original data set. Categorical variables (character or factor)
must be of the same form (same set of character values in the case
of character variables and the same levels in the same order in the case of
factor variables) as they appear in the model data frame on which the
model was fitted. <code>pred.grid</code> facilitates the process, in comparison
with <code><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></code>, by allowing references to variables
in the model data frame by name or by specifying a vector of values
in the case of numeric predictors.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">hs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">within</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>   <span class="va">hs</span>,</span></span>
<span class="r-in"><span>   <span class="op">{</span></span></span>
<span class="r-in"><span>      <span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="va">Sector</span>, <span class="va">school</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>         <span class="va">as.factor</span> <span class="op"><a href="pipe.html">%&gt;%</a></span> </span></span>
<span class="r-in"><span>         <span class="fu"><a href="https://rdrr.io/r/stats/reorder.factor.html" class="external-link">reorder</a></span><span class="op">(</span><span class="va">ses</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">Sector</span> <span class="op">==</span> <span class="st">'Catholic'</span><span class="op">)</span><span class="op">*</span><span class="fl">1000</span><span class="op">)</span> </span></span>
<span class="r-in"><span>      <span class="va">ses_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="capply.html">capply</a></span><span class="op">(</span><span class="va">ses</span>, <span class="va">id</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  </span></span>
<span class="r-in"><span>      <span class="va">mathach_mean</span> <span class="op">&lt;-</span> <span class="fu"><a href="capply.html">capply</a></span><span class="op">(</span><span class="va">mathach</span>, <span class="va">id</span>, <span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>  </span></span>
<span class="r-in"><span>   <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mathach</span> <span class="op">~</span> <span class="op">(</span><span class="va">ses</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">ses</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">*</span> <span class="va">id</span>, <span class="va">hs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">pred1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/with.html" class="external-link">with</a></span><span class="op">(</span><span class="va">hs</span>, <span class="fu">pred.grid</span><span class="op">(</span><span class="va">id</span>, ses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="fl">3</span>,<span class="fl">3</span>, <span class="fl">.1</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="va">pred1</span><span class="op">$</span><span class="va">fit1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit1</span>, newdata <span class="op">=</span> <span class="va">pred1</span><span class="op">)</span> </span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>contrasts dropped from factor id</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">mathach</span> <span class="op">~</span> <span class="op">(</span><span class="va">ses</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/r/base/AsIs.html" class="external-link">I</a></span><span class="op">(</span><span class="va">ses</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">*</span> <span class="va">Sector</span>, <span class="va">hs</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># add Sector to pred1</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pred1</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">pred1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            id ses       fit1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Public 5762  -3  3.6405505</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Public 2639  -3 -1.2759231</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Public 8854  -3  8.0605939</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Public 7890  -3 -6.1741051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Public 8874  -3  0.4196072</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Public 2771  -3 23.3842402</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2440    3</span>
<span class="r-in"><span><span class="va">pred2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/merge.html" class="external-link">merge</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>           <span class="va">pred1</span>, </span></span>
<span class="r-in"><span>           <span class="fu"><a href="up.html">up</a></span><span class="op">(</span><span class="va">hs</span>, <span class="op">~</span><span class="va">id</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>           by <span class="op">=</span> <span class="st">'id'</span>, </span></span>
<span class="r-in"><span>           all.x <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">pred2</span><span class="op">)</span>; <span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">pred2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>              id  ses      fit1 school Size   Sector PRACAD DISCLIM mathach_mean</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Catholic 1317 -2.7  1.490678   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 Catholic 1317  0.7 13.732780   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 Catholic 1317 -2.4  3.434712   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 Catholic 1317  0.4 13.516443   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 Catholic 1317  0.3 13.407176   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 Catholic 1317 -0.3 12.361448   1317  455 Catholic   0.95  -1.694     13.17769</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ses_mean Freq</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 0.3453333   48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 2440   11</span>
<span class="r-in"><span><span class="va">pred2</span><span class="op">$</span><span class="va">fit2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict</a></span><span class="op">(</span><span class="va">fit2</span>, newdata <span class="op">=</span> <span class="va">pred2</span><span class="op">)</span> </span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Existing methods allow you to graph lines fitted</span></span></span>
<span class="r-in"><span><span class="co"># within each panel</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://lattice.r-forge.r-project.org/" class="external-link">lattice</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://latticeextra.r-forge.r-project.org/" class="external-link">latticeExtra</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">mathach</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">hs</span>, groups <span class="op">=</span> <span class="va">Sex</span>, </span></span>
<span class="r-in"><span>   layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">.8</span>, <span class="fl">.5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>space <span class="op">=</span> <span class="st">'right'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">.4</span>,<span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   skip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">F</span>,<span class="cn">T</span>,<span class="cn">F</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>,<span class="fl">2</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-plt img"><img src="pred.grid-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html" class="external-link">glayer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/panel.smoother.html" class="external-link">panel.smoother</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">)</span> <span class="co"># </span></span></span>
<span class="r-plt img"><img src="pred.grid-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using 'pred.grid' and 'expand.grid' makes it easier</span></span></span>
<span class="r-in"><span><span class="co"># to graph lines fitted with models</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="td.html">td</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">1</span>, cex <span class="op">=</span> <span class="fl">.5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span></span></span>
<span class="r-plt img"><img src="pred.grid-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit1</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred1</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pred.grid-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit1</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred1</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit2</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred2</span>, type <span class="op">=</span> <span class="st">'l'</span>, col <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="co"># ?????</span></span></span>
<span class="r-plt img"><img src="pred.grid-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">pred2</span> <span class="op">&lt;-</span> <span class="fu"><a href="sortdf.html">sortdf</a></span><span class="op">(</span><span class="va">pred2</span>, <span class="op">~</span> <span class="va">ses</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit1</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred1</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit2</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred2</span>, type <span class="op">=</span> <span class="st">'l'</span>, col <span class="op">=</span> <span class="st">'black'</span><span class="op">)</span> <span class="co"># zig-zagging gone</span></span></span>
<span class="r-plt img"><img src="pred.grid-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Referring to other variables in panel functions</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">mathach</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">hs</span>, groups <span class="op">=</span> <span class="va">Sex</span>, </span></span>
<span class="r-in"><span>   layout <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">7</span>,<span class="fl">6</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   cex <span class="op">=</span> <span class="fl">.4</span>,</span></span>
<span class="r-in"><span>   ses_mean <span class="op">=</span> <span class="va">hs</span><span class="op">$</span><span class="va">ses_mean</span>,</span></span>
<span class="r-in"><span>   mathach_mean <span class="op">=</span> <span class="va">hs</span><span class="op">$</span><span class="va">mathach_mean</span>,</span></span>
<span class="r-in"><span>   par.strip.text <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">.7</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   auto.key <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>space <span class="op">=</span> <span class="st">'right'</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   between <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">.4</span>,<span class="fl">0</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>   subscripts <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>   skip <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">F</span>,<span class="cn">T</span>,<span class="cn">F</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">19</span>,<span class="fl">2</span>,<span class="fl">20</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html" class="external-link">glayer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/panel.smoother.html" class="external-link">panel.smoother</a></span><span class="op">(</span><span class="va">...</span>, se <span class="op">=</span> <span class="cn">FALSE</span>, lwd <span class="op">=</span> <span class="fl">2</span>, lty <span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html" class="external-link">layer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.functions.html" class="external-link">panel.abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="va">ses_mean</span><span class="op">[</span><span class="va">subscripts</span><span class="op">]</span>,<span class="va">...</span>,col <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span>  </span></span>
<span class="r-in"><span> <span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html" class="external-link">layer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.functions.html" class="external-link">panel.abline</a></span><span class="op">(</span>h<span class="op">=</span><span class="va">mathach_mean</span><span class="op">[</span><span class="va">subscripts</span><span class="op">]</span>,<span class="va">...</span>,col <span class="op">=</span> <span class="st">'gray'</span><span class="op">)</span><span class="op">)</span>  </span></span>
<span class="r-plt img"><img src="pred.grid-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span> </span></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/latticeExtra/man/layer.html" class="external-link">glayer</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/lattice/man/panel.functions.html" class="external-link">panel.abline</a></span><span class="op">(</span>v<span class="op">=</span><span class="va">ses_mean</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="pred.grid-8.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">p</span> <span class="op">+</span> <span class="fu"><a href="https://rdrr.io/pkg/lattice/man/xyplot.html" class="external-link">xyplot</a></span><span class="op">(</span><span class="va">fit1</span> <span class="op">~</span> <span class="va">ses</span> <span class="op">|</span> <span class="va">id</span>, <span class="va">pred1</span>, type <span class="op">=</span> <span class="st">'l'</span><span class="op">)</span>    </span></span>
<span class="r-plt img"><img src="pred.grid-9.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georges Monette.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

