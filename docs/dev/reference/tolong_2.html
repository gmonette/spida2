<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Long data set from wide data set — tolong_2 • spida2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Long data set from wide data set — tolong_2"><meta name="description" content="Creates a long data set from a wide data set identifying 'time'-varying
variables by a separator"><meta property="og:description" content="Creates a long data set from a wide data set identifying 'time'-varying
variables by a separator"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">spida2</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.2.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/spida2.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/generalParametricSplines_v2.html">General Parametric Splines in carEx v.2</a></li>
    <li><a class="dropdown-item" href="../articles/generalParametricSplines.html">General Parametric Splines in carEx</a></li>
    <li><a class="dropdown-item" href="../articles/pdInd.html">pdInd</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/gmonette/spida2/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Long data set from wide data set</h1>
      <small class="dont-index">Source: <a href="https://github.com/gmonette/spida2/blob/HEAD/R/tolong_2.R" class="external-link"><code>R/tolong_2.R</code></a></small>
      <div class="d-none name"><code>tolong_2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates a long data set from a wide data set identifying 'time'-varying
variables by a separator</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">tolong_2</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  sep <span class="op">=</span> <span class="st">"_"</span>,</span>
<span>  expand <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  timevar <span class="op">=</span> <span class="st">"time"</span>,</span>
<span>  idvar <span class="op">=</span> <span class="st">"id"</span>,</span>
<span>  safe_sep <span class="op">=</span> <span class="st">"#%@!"</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data frame in 'wide' form.</p></dd>


<dt id="arg-sep">sep<a class="anchor" aria-label="anchor" href="#arg-sep"></a></dt>
<dd><p>(default: '<em>') the separator that identifies time-varying
variables separating the 'root' containing the name of the variable in the
long data set from the 'occasion' name. e.g. the separator '</em>' in the
variable names 'y_1', 'y_2', separate the 'root', 'y', from the occasions,
'1' and '2'. Default: '_'.</p></dd>


<dt id="arg-expand">expand<a class="anchor" aria-label="anchor" href="#arg-expand"></a></dt>
<dd><p>(default TRUE) If different root names have inconsistent
occasion names, should variable names be created (with NAs as values) so all
root names have consistent occasion names.</p></dd>


<dt id="arg-timevar">timevar<a class="anchor" aria-label="anchor" href="#arg-timevar"></a></dt>
<dd><p>(default: 'time') the variable containing the occasion names
in the long file. Typically, this variable name should not exist in 'data'.
If these is a conflict, an integer is appended to the name to create a new
name.</p></dd>


<dt id="arg-idvar">idvar<a class="anchor" aria-label="anchor" href="#arg-idvar"></a></dt>
<dd><p>(default: 'id') the variable identifying the row in the wide
file from which each row in the long file is obtained. The variable should
have distinct values in the wide file. If the variable does not exist in the
wide file (or if it exists but does not have distinct values) a new variable
is created with values equal to the row number in the wide frame.</p></dd>


<dt id="arg-safe-sep">safe_sep<a class="anchor" aria-label="anchor" href="#arg-safe-sep"></a></dt>
<dd><p>is used to create unique variable name combinations when
expanding time-varying variables to have consistent occasion names.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments are passed to <code><a href="https://rdrr.io/r/stats/reshape.html" class="external-link">reshape</a></code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a data frame in long form in which each 'root' of a time-varying
variables is a variable and the occasions are the values of the variable
with name 'timevar'.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="tolong.html">tolong</a></code> and <code><a href="towide.html">towide</a></code> for many examples using both 'towide' and 'tolong'.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">dd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span> y.a <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, y.b <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, x.a<span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, time <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>,</span></span>
<span class="r-in"><span>                  x.b <span class="op">=</span> <span class="fl">11</span><span class="op">:</span><span class="fl">13</span>, x.c <span class="op">=</span> <span class="fl">21</span><span class="op">:</span><span class="fl">23</span>, id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'a'</span>,<span class="st">'a'</span>,<span class="st">'b'</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tolong_2</span><span class="op">(</span><span class="va">dd</span>, sep <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">tolong_2</span><span class="op">(</span><span class="va">dd</span>, sep <span class="op">=</span> <span class="st">'.'</span>, timevar <span class="op">=</span> <span class="st">"type"</span>, idvar <span class="op">=</span> <span class="st">'patient'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Georges Monette.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

